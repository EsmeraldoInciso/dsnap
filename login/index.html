<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign In â€” DSnap</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“¸</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <link rel="stylesheet" href="../style.css">
  <script>(function(){var t=localStorage.getItem('dsnap_theme')||'dark';document.documentElement.setAttribute('data-theme',t)})()</script>
  <script src="https://www.google.com/recaptcha/api.js?render=6Ld0RWgsAAAAABRdIcHVQcVkgAswfd_wb4mluzfY"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@4/dist/fp.min.js"></script>
  <script>var PAGE_TYPE = 'public';</script>
</head>
<body>
  <div class="splash-screen" id="splashScreen"><div class="splash-inner"><div class="splash-logo"><span>D</span><div class="splash-logo-lens"></div></div><div class="splash-title">D<span>Snap</span></div><div class="splash-spinner"></div></div></div>

  <div id="pageContent" style="display:none;">
    <div class="auth-screen">
      <div class="auth-container">
        <div class="auth-logo"><div class="nav-logo"><span class="nav-logo-letter">D</span><div class="nav-logo-lens"></div></div></div>
        <h1 class="auth-title">D<span>Snap</span></h1>
        <p class="auth-subtitle">Every moment, perfectly captured</p>

        <div class="auth-tabs">
          <button class="auth-tab active" id="tabLogin" onclick="showTab('login')">Sign In</button>
          <button class="auth-tab" id="tabSignup" onclick="showTab('signup')">Sign Up</button>
        </div>

        <div id="loginForm" class="auth-form">
          <div class="form-group"><label>Email</label><input type="email" id="loginEmail" placeholder="you@email.com"></div>
          <div class="form-group"><label>Password</label><input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
          <button class="btn btn-primary btn-full" onclick="doLogin()"><span class="material-icons-round">login</span> Sign In</button>
        </div>

        <div id="signupForm" class="auth-form" style="display:none;">
          <div class="form-group"><label>Name</label><input type="text" id="signupName" placeholder="Your name" maxlength="40"></div>
          <div class="form-group"><label>Email</label><input type="email" id="signupEmail" placeholder="you@email.com"></div>
          <div class="form-group"><label>Password</label><input type="password" id="signupPassword" placeholder="Min 6 characters"></div>
          <button class="btn btn-primary btn-full" onclick="doSignup()"><span class="material-icons-round">person_add</span> Create Account</button>
        </div>

        <div class="auth-divider"><span>or</span></div>
        <button class="btn btn-google btn-full" onclick="handleGoogleLogin()">
          <svg width="18" height="18" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.6 20.1H42V20H24v8h11.3C33.9 33.6 29.3 36 24 36c-6.6 0-12-5.4-12-12s5.4-12 12-12c3.1 0 5.8 1.2 8 3l5.7-5.7C34 6 29.2 4 24 4 12.9 4 4 12.9 4 24s8.9 20 20 20 20-8.9 20-20c0-1.3-.2-2.7-.4-3.9z"/><path fill="#FF3D00" d="M6.3 14.7l6.6 4.8C14.5 15.5 18.8 12 24 12c3.1 0 5.8 1.2 8 3l5.7-5.7C34 6 29.2 4 24 4 16.3 4 9.7 8.3 6.3 14.7z"/><path fill="#4CAF50" d="M24 44c5 0 9.5-1.8 13-4.7l-6-5c-2 1.5-4.5 2.5-7 2.5-5.2 0-9.6-3.5-11.2-8.2l-6.5 5C9.5 39.6 16.2 44 24 44z"/><path fill="#1976D2" d="M43.6 20.1H42V20H24v8h11.3c-.8 2.2-2.2 4.1-4 5.4l6 5c-.4.4 6.7-4.9 6.7-14.4 0-1.3-.2-2.7-.4-3.9z"/></svg>
          Continue with Google
        </button>

        <div class="auth-status" id="authStatus"></div>
        <p class="recaptcha-note">Protected by reCAPTCHA</p>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script src="../auth.js"></script>
  <script>
    function showTab(tab) {
      document.getElementById('loginForm').style.display = tab === 'login' ? 'flex' : 'none';
      document.getElementById('signupForm').style.display = tab === 'signup' ? 'flex' : 'none';
      document.getElementById('tabLogin').className = 'auth-tab' + (tab === 'login' ? ' active' : '');
      document.getElementById('tabSignup').className = 'auth-tab' + (tab === 'signup' ? ' active' : '');
      document.getElementById('authStatus').textContent = '';
    }
    function doLogin() {
      var e = document.getElementById('loginEmail').value.trim();
      var p = document.getElementById('loginPassword').value;
      var s = document.getElementById('authStatus');
      if (!e || !p) { s.textContent = 'Fill in all fields.'; s.className = 'auth-status error'; return; }
      s.textContent = 'Signing in...'; s.className = 'auth-status';
      handleLogin(e, p).catch(function(err) { s.textContent = err.message; s.className = 'auth-status error'; });
    }
    function doSignup() {
      var n = document.getElementById('signupName').value.trim();
      var e = document.getElementById('signupEmail').value.trim();
      var p = document.getElementById('signupPassword').value;
      var s = document.getElementById('authStatus');
      if (!n || !e || !p) { s.textContent = 'Fill in all fields.'; s.className = 'auth-status error'; return; }
      if (p.length < 6) { s.textContent = 'Password must be 6+ characters.'; s.className = 'auth-status error'; return; }
      s.textContent = 'Creating account...'; s.className = 'auth-status';
      handleSignup(n, e, p).catch(function(err) { s.textContent = err.message; s.className = 'auth-status error'; });
    }
    function onAuthReady() {}
  </script>
</body>
</html>
